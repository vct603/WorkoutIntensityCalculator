<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>運動強度計算器</title>
  <style>
    body {
      font-family: "Noto Sans TC", sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      padding: 1px;
      background-color: #e5e5f7;
      opacity: 0.9;
      background-image:  repeating-radial-gradient( circle at 0 0, transparent 0, #e5e5f7 90px ), repeating-linear-gradient( #ffffff55, #ffffff );
    }

    body.dark {
        background-color: #000000;
        opacity: 0.9;
        background-image:  repeating-radial-gradient( circle at 0 0, transparent 0, #000000 90px ), repeating-linear-gradient( #18181e55, #343446 );
    }

    h1 {
      margin-top: -100px;
      margin-bottom: 100px;
      color: #333;
      font-size: 80px;
      transition: color 1s ease;
    }

    body.dark h1 {
      color: #f0f0f0;
    }

    .container {
      background: rgba(36, 36, 36, 0.9);  /* 稍微透明，保證字體顯示清楚 */
      color: #ffffff;  /* 黑色字體 */
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
      padding: 60px 40px;
      border-radius: 15px;
      width: 100%;
      max-width: 400px;
      transition: background 0.5s ease, color 0.5s ease, box-shadow 0.5s ease;
    }

    body.dark .container {
      background: rgba(255, 255, 255, 0.8);  /* 白色背景，透明度80% */
      color: #333;  /* 黑色字體 */
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
    }


    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
      font-size: 35px;
    }

    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 20px;
    }

    button {
      width: 100%;
      padding: 12px;
      margin-top: 20px;
      background-color: #b6b9ec;
      color: #000000;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      font-size: 18px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    body.dark button {
      width: 100%;
      padding: 12px;
      margin-top: 20px;
      background-color: #878acf;
      color: #ffffff;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      font-size: 18px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #878acf;
    }

    body.dark button:hover {
      background-color: #b6b9ec;
    }

    #toggleMode {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 40px;
      height: 40px;
      background-color: #fff;
      color: #000000;
      border-radius: 50%;
      border: none;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: background-color 0.3s ease;
    }

    #toggleMode.dark {
        position: absolute;
      top: 20px;
      right: 20px;
      width: 40px;
      height: 40px;
      background-color: #333;
      color: #fff;
      border-radius: 50%;
      border: none;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    #toggleMode:hover {
      background-color: #363636c4;
    }
    #toggleMode.dark:hover {
      background-color: #f7f7f7be;
    }

    #result {
      margin-top: 25px;
      font-size: 18px;
      text-align: center;
    }
    

    @media (max-width: 480px) {
      .container {
        padding: 20px;
      }
    }
  </style>
</head>

<body>
  <button id="toggleMode" onclick="toggleMode()">🌙</button>

  <h1>運動強度計算器</h1>

  <div class="container">
    <label>年齡</label>
    <input type="number" id="age" min="1" placeholder="輸入您的年齡">

    <label>安靜心跳率</label>
    <input type="number" id="rest" min="0" placeholder="輸入安靜心跳率">

    <label>目標強度</label>
    <select id="intense">
      <option value="light">輕度 (50% ~ 60%)</option>
      <option value="low">低度 (60% ~ 70%)</option>
      <option value="mid">中度 (70% ~ 80%)</option>
      <option value="high">高度 (80% ~ 100%)</option>
    </select>

    <button onclick="calculate()">計算！</button>

    <div id="result">
      最低心跳: <strong>0 bpm</strong><br>
      最高心跳: <strong>0 bpm</strong>
    </div>     
  </div>

  <script>
    function kar(age, rest, intense) {
      let max = 220 - age;
      return ((max - rest) * intense) + rest;
    }

    function calculate() {
      const age = parseInt(document.getElementById('age').value);
      const rest = parseInt(document.getElementById('rest').value);
      const level = document.getElementById('intense').value;
      let minTgt, maxTgt;

      if (isNaN(age) || isNaN(rest)) {
        document.getElementById('result').innerText = "請正確輸入年齡和安靜心跳率！";
        return;
      }
      if (age < 1) {
        document.getElementById('result').innerText = "年齡必須大於或等於 1 歲！";
        return;
      }
      if (rest < 0) {
        document.getElementById('result').innerText = "安靜心跳率必須大於或等於 0！";
        return;
      }

      if (level === "light") {
        minTgt = kar(age, rest, 0.5);
        maxTgt = kar(age, rest, 0.6);
      } else if (level === "low") {
        minTgt = kar(age, rest, 0.6);
        maxTgt = kar(age, rest, 0.7);
      } else if (level === "mid") {
        minTgt = kar(age, rest, 0.7);
        maxTgt = kar(age, rest, 0.8);
      } else if (level === "high") {
        minTgt = kar(age, rest, 0.8);
        maxTgt = kar(age, rest, 1.0);
      } else {
        document.getElementById('result').innerText = "請選擇正確的強度！";
        return;
      }

      document.getElementById('result').innerHTML = `
        最低心跳: <strong>${Math.round(minTgt)} bpm</strong><br>
        最高心跳: <strong>${Math.round(maxTgt)} bpm</strong>
      `;
    }

    function toggleMode() {
      document.body.classList.toggle('dark');
      document.getElementById('toggleMode').classList.toggle('dark');
      if (document.body.classList.contains('dark')) {
        document.getElementById('toggleMode').innerHTML = "☀️";
      } else {
        document.getElementById('toggleMode').innerHTML = "🌙";
      }
    }
  </script>
</body>
</html>
